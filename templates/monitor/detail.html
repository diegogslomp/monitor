{% extends "monitor/base.html" %}

{% block title %} Detailed Host {% endblock %}

{% block content %}
<div class="ui {{ host.get_status_display }} message">
    <div class="ui segment">
        <h4 class="ui header">
            <i class="bar chart icon"></i>
            Description
        </h4>
        <table class="ui very compact definition table">
        <tbody>
            <tr>
                <td class="two wide column">Name</td>
                <td>{{ host.name }}</td>
            </tr>
            <tr>
                <td>Address</td>
                <td>{{ host.ipv4 }}</td>
            </tr>
            <tr>
                <td>Status Info</td>
                <td>{{ host.status_info }}</td>
            </tr>
            <tr>
                <td>Last status change</td>
                <td>{{ host.last_status_change|date:"d/m/y - H:i" }}</td>
            </tr>
            <tr>
                <td>Last check</td>
                <td>{{ host.last_check|date:"d/m/y - H:i" }}</td>
            </tr>
        </tbody>
        </table>
    </div>
    <div class="ui segment">
        <h4 class="ui header">
            <i class="database icon"></i>
            Last Logs
        </h4>
        <table class="ui very compact single line table">
        <tbody>
            {% if host.log_set.count > 0 %}
                {% for log in host.log_set.all|dictsortreversed:"status_change" %}
                    <tr class="{{ log.get_status_display }}">
                        <td>{{ log.status_info }}</td>
                        <td>{{ log.status_change }}</td>
                    </tr>
                {% endfor %}
            {% else %}
            <tr><span>No log registered yet</span></tr>
            {% endif %}
        </tbody>
        </table>
    </div>
    <div class="ui segment">
        <a class="ui {{ host.get_status_display }} basic button" href="{% url 'monitor:index' %}">Return</a>
    </div>
{% endblock %}
